# Z-score predictive IOC parameters
Z_SCORE_IOC_THRESHOLD = 25          # Minimum |z| to trigger predictive IOC (strong signal)- was .70- setting to 20 to disable IOC
Z_IOC_OPTION_MOVE_THRESHOLD = 0.06   # 6 cents predicted option move required to justify crossing spread
MIN_EDGE_IOC = 0.06                  # 4 cents minimum edge required after predicted move (prevents firing on stale signals)
IOC_COOLDOWN = 5.0                  # Seconds between IOC orders (prevents spam when z-score stays elevated)
IOC_SIZE_BUILD = 5               # fixed size for IOC orders that build/open position
IOC_SIZE_REDUCE = 5             # max size for IOC orders that reduce position (also capped by position size)
BASE_QUOTE_SPREAD = 0.050 # .05 base quote, 30 max position, 5 base size was working well
MAX_POSITION = 30 # Upped this to 30 from 15!! scaling
BASE_SIZE = 5.0 # Base size/max pos was 5 / 30
#INV_SKEW_PER_SHARE = 0.00050

SKEW_K = .60          # 0.3–1.0, start ~0.6
SKEW_CAP = 0.04       # max skew in price points (5c)

MIN_PRICE = 0.01
MAX_PRICE = 0.99
PRICE_MOVE_TOL = 0.0015          # don't cancel/replace if existing quote is within 0.5c of target
TICK_SIZE = .01
MIN_TICKS_BUILD = 0   # ticks from touch when building position (more conservative)
MIN_TICKS_REDUCE = 0   # ticks from touch when reducing position (want to get filled)
MIN_EDGE_TO_QUOTE = 0.02  # minimum edge (in price points) required to quote a side

MIN_ORDER_INTERVAL = .30  # seconds → max 5 orders/sec per market+side, # changed this back to 1
POST_FILL_COOLDOWN = 1.0  # seconds to pause quoting on a side after getting filled (GTC only)

# Binance momentum adjustment
USE_BINANCE_MOMENTUM = False  # Toggle to use Binance momentum for predictive quoting
BINANCE_MOMENTUM_LOOKBACK = 0.5  # Seconds to look back for momentum calculation
MAX_MOMENTUM_ADJUSTMENT = 0.03  # Max price adjustment from momentum (caps at 3 cents)

# Dynamic spread based on option price sensitivity
OPTION_MOVE_LOOKBACK = 1.0        # Seconds to look back for BTC move
OPTION_MOVE_THRESHOLD = 0.02      # 2 cents - start widening when option moved this much (was 0.02)
OPTION_MOVE_SPREAD_SCALE = 0.25    # spread multiplier per cent above threshold (was 0.5)
MAX_OPTION_SPREAD_MULT = 1.0      # was 2.0, decreasing to 1.0 to turn this feature off!

# Book imbalance adjustment
USE_BOOK_IMBALANCE = True
BOOK_IMBALANCE_LEVELS = 4         # how many price levels to consider (0 for all)
MAX_IMBALANCE_ADJUSTMENT = .015   # max fair value nudge (1 cent)

# Early cancel threshold (option price sensitivity)
EARLY_CANCEL_OPTION_MOVE = .35  # .5 cent option move triggers immediate cancel # TODO: jitter may throw this off

# Coinbase-RTDS z-score threshold (predictive edge detection when using RTDS)
COINBASE_RTDS_ZSCORE_THRESHOLD = 0.70  # Skip vulnerable side when |z| > 0.70
Z_SCORE_COMBINED_THRESHOLD = 0.40      # Combined threshold (half of main)
Z_SKEW_COMBINED_THRESHOLD = 0.025      # 2.5¢ predicted option move threshold for combined rule

# Z-score skew (continuous adjustment based on predicted RTDS movement)
MAX_Z_SCORE_SKEW = 0.030 # 